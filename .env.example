# ===================================
# ENVIRONMENT VARIABLES - COMPREHENSIVE TEMPLATE
# ===================================
# Instructions:
# 1. Copy this file to .env in the root directory
# 2. Fill in actual values (never commit .env to git)
# 3. All services (backend, frontend) read from root .env
# ===================================

# ===================================
# SERVER CONFIGURATION
# ===================================
PORT=3000
NODE_ENV=development
HOST=localhost

# ===================================
# DATABASE CONFIGURATION
# ===================================
DATABASE_URL=postgresql://user:password@localhost:5432/dbname
DB_MAX_CONNECTIONS=10
DB_CONNECTION_TIMEOUT_MS=5000

# Token encryption (generate with: openssl rand -base64 32)
TOKEN_ENCRYPTION_KEY=your_base64_encoded_32_byte_key_here

# ===================================
# SUPABASE CONFIGURATION
# ===================================
# Get these from: https://app.supabase.com/project/_/settings/api
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here
SUPABASE_JWT_SECRET=your_jwt_secret_here

# ===================================
# REDIS CONFIGURATION
# ===================================
# For production (Railway/cloud)
REDIS_URL=redis://default:password@host:6379

# For local development, set to true to disable
DISABLE_REDIS=false

# ===================================
# JWT CONFIGURATION
# ===================================
# Generate secret: openssl rand -hex 64
JWT_SECRET=your_jwt_secret_minimum_64_characters_for_production_security
JWT_EXPIRES_IN=24h
JWT_ISSUER=assistantapp
JWT_AUDIENCE=assistantapp-client

# ===================================
# GOOGLE OAUTH CONFIGURATION
# ===================================
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URI=http://localhost:3000/auth/callback

# iOS client ID (for mobile app)
GOOGLE_IOS_CLIENT_ID=your_ios_client_id
GOOGLE_WEB_CLIENT_ID=your_web_client_id

# Service account (optional, for server-to-server)
GOOGLE_SERVICE_ACCOUNT_PATH=./credentials/service-account-key.json

# ===================================
# SLACK CONFIGURATION
# ===================================
# Get from: https://api.slack.com/apps
SLACK_SIGNING_SECRET=your_slack_signing_secret
SLACK_BOT_TOKEN=xoxb-your-bot-token
SLACK_CLIENT_ID=your_slack_client_id
SLACK_CLIENT_SECRET=your_slack_client_secret
SLACK_OAUTH_REDIRECT_URI=http://localhost:3000/slack/oauth/callback

# ===================================
# OPENAI CONFIGURATION
# ===================================
OPENAI_API_KEY=sk-your_openai_api_key
OPENAI_TIMEOUT=30000
OPENAI_MAX_RETRIES=2

# ===================================
# ANTHROPIC CONFIGURATION
# ===================================
ANTHROPIC_API_KEY=your_anthropic_api_key

# ===================================
# OTHER API KEYS
# ===================================
TAVILY_API_KEY=your_tavily_api_key

# Airtable (optional)
AIRTABLE_API_KEY=your_airtable_api_key
AIRTABLE_BASE_ID=your_airtable_base_id
AIRTABLE_TABLE_ID=your_airtable_table_id

# ===================================
# SECURITY CONFIGURATION
# ===================================
# CORS origins (comma-separated, use * for development only)
SECURITY_CORS_ORIGIN=http://localhost:3000,http://localhost:19006
CORS_ORIGIN=http://localhost:3000
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# OAuth state secret (generate with: openssl rand -hex 32)
OAUTH_STATE_SECRET=your_oauth_state_secret_minimum_32_characters

# Session secret (generate with: openssl rand -hex 32)
SESSION_SECRET=your_session_secret_minimum_32_characters

# ===================================
# RATE LIMITING
# ===================================
SECURITY_RATE_LIMITING_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
SECURITY_RATE_LIMITING_WINDOW_MS=900000
SECURITY_RATE_LIMITING_MAX_REQUESTS=100
SECURITY_RATE_LIMITING_AUTH_WINDOW_MS=900000
SECURITY_RATE_LIMITING_AUTH_MAX_REQUESTS=10

# ===================================
# LOGGING CONFIGURATION
# ===================================
LOG_LEVEL=info
LOG_FILE_PATH=./backend/logs/app.log
LOG_MAX_BODY_LENGTH=10000
LOG_ENABLE_REQUEST=true
LOG_ENABLE_RESPONSE=true
LOG_ENABLE_SLOW_QUERY=true
LOG_SLOW_QUERY_THRESHOLD=5000

# ===================================
# CACHE CONFIGURATION
# ===================================
CACHE_ENABLED=true
CACHE_TTL=300
CACHE_MAX_SIZE=1000

# ===================================
# API CLIENT CONFIGURATION
# ===================================
API_CLIENT_TIMEOUT=30000
API_CLIENT_RETRY_MAX_ATTEMPTS=3
API_CLIENT_RETRY_BASE_DELAY=1000
API_CLIENT_RETRY_MAX_DELAY=10000
API_CLIENT_RETRY_BACKOFF_MULTIPLIER=2
API_CLIENT_RETRY_JITTER=true

# ===================================
# CIRCUIT BREAKER CONFIGURATION
# ===================================
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60000
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=3
CIRCUIT_BREAKER_TIMEOUT=30000

# ===================================
# EMAIL SERVICE CONFIGURATION
# ===================================
EMAIL_BATCH_SIZE=50
EMAIL_MAX_SEARCH_RESULTS=100
EMAIL_ENABLE_DATA_LOADER=true

# ===================================
# SESSION CONFIGURATION
# ===================================
CONTEXT_TTL_MINUTES=30

# ===================================
# FEATURE FLAGS
# ===================================
ENABLE_SWAGGER=false
ENABLE_DETAILED_HEALTH=false

# ===================================
# AI MODEL CONFIGURATION
# ===================================
AI_GENERAL_MODEL=gpt-4o-mini
AI_GENERAL_TEMPERATURE=0.3
AI_GENERAL_MAX_TOKENS=1000
AI_GENERAL_TIMEOUT=25000

AI_ROUTING_MODEL=gpt-4o-mini
AI_ROUTING_TEMPERATURE=0.1
AI_ROUTING_MAX_TOKENS=500
AI_ROUTING_TIMEOUT=15000

AI_CONTENT_MODEL=gpt-4o-mini
AI_CONTENT_TEMPERATURE=0.7
AI_CONTENT_MAX_TOKENS=2000
AI_CONTENT_TIMEOUT=30000

AI_ANALYSIS_MODEL=gpt-4o-mini
AI_ANALYSIS_TEMPERATURE=0.0
AI_ANALYSIS_MAX_TOKENS=1000
AI_ANALYSIS_TIMEOUT=20000

# ===================================
# PRODUCTION OVERRIDES
# ===================================
# For production deployment, override these:
# NODE_ENV=production
# SECURITY_CORS_ORIGIN=https://yourdomain.com
# DISABLE_REDIS=false
# LOG_LEVEL=warn
# ENABLE_SWAGGER=false
